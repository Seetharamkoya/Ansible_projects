### Installation and configuration ssh connection b/w master node and client nodes.

Step 1 : Pre-requisites  - in all 3 machines
Step 2 : Install vim package in all 3 machines
Step 3:  DNS Setup (or) Ensure you have all 3 machines DNS is working	
Step 4:  SSH connection need to be enabled if you are using cloud machines
Step 5:  Create user called ansible in all machines
Step 6:  Login to all servers and enable sudo permission for ansible user with no password
Step 7:  Login as ansible user into ansible server 
Step 8:  Create ssh keys in ansible server
Step 9:  Copy SSH keys from ansible server to clients
Step 10:  Test the ssh keys are working or not ? how ?.
Step 11:  Install Ansible in Ansible server
Step 12:  Create your environment directories.
Step 13:  Test your ansible environment is correctly configured or not ?
Step 14:  Test your client servers connectivity from ansible ?
Step 15:  Configure VIM Editor purpose .To Avoid intend issues



1. To install epel-release repo in all three machines

```
yum install epel-release -y

```

2. SSH connection need to be enabled if you are using cloud machines in all 3 machines go to /etc/ssh/sshd_config file using vim editor.

``` 
sudo nano /etc/ssh/sshd_config

```

```
# To disable tunneled clear text passwords, change to no here!
PasswordAuthentication yes --> this line should be un commented
#PermitEmptyPasswords no
#PasswordAuthentication no --> this line should be commented
```

3. Restart the sshd service

```
systemctl restart sshd

```


4. Create a new user&password in all the three machines



```
useradd xxxxx
passwd xxxxxx

```

5. Login to all servers/nodes and enable sudo permission for ansible user with no password


```
sudo nano /etc/sudoers
````

````
root ALL=(ALL)       NOPASSWD:       ALL

````

6. Login as user into each machine

``` 
sudo su - xxxx
````
7. Create ssh keys in ansible server/mster node

```
ssh-keygen
```

8. Copy SSH keys from ansible server to clients

```
ssh-copy-id user@IP
```

9.  Install Ansible in Ansible server

```
sudo yum install ansible -y
```

10. Test your ansible environment is correctly configured or not 
    
    ```
    create sep env directory with .cfg and hosts files for each environment
    ```

11. Test your ansible environment is correctly configured

```
ansible all --list
```

12. Test your client servers connectivity from ansible

```
ansible all -m ping  --> we must receive ping / pong in green
```

13. Configure VIM Editor purpose .To Avoid intend issues

you must do this in ansible server only

go to /home/ansible/ home directory

vim .vimrc

set ai
set tabstop=2
set expandtab

save this file .Then logoff and login .

Or 

source ~/.vimrc


reference: https://github.com/cloudnloud/Ansible_Automation/blob/main/Class4/lab-setup.txt
